version: '3.7'

services:
  backend:
    container_name: cartostory_backend_test
    build:
      context: ../backend
      target: development
    volumes:
      - ../backend:/app
      - /app/node_modules
    depends_on:
      - database
      - flyway
      - rabbitmq
    command: >
      sh -c "cd /app && npm run test -- --watchAll"
